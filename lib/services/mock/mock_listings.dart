import '../../models/listing.dart';
import '../../models/user.dart';
import 'mock_users.dart';

AppUser _user(String id) =>
    mockUsers.firstWhere((u) => u.id == id, orElse: () => mockUsers.first);

final mockListings = <Listing>[
  Listing(
    id: 'listing-1',
    userId: 'user-2',
    user: _user('user-2'),
    status: ListingStatus.active,
    pickup: const GeoPoint(
      address: 'Trg Republike 3',
      city: 'Belgrade',
      country: 'Serbia',
      lat: 44.8176,
      lng: 20.4633,
    ),
    delivery: const GeoPoint(
      address: 'Maršala Tita 15',
      city: 'Sarajevo',
      country: 'Bosnia',
      lat: 43.8563,
      lng: 18.4131,
    ),
    pickupDate: DateTime.now().add(const Duration(days: 2, hours: 9)),
    deliveryDate: DateTime.now().add(const Duration(days: 2, hours: 16)),
    load: const LoadDetails(
      description:
          'Office furniture — 3 executive desks, 6 ergonomic chairs, 2 filing cabinets. All pieces disassembled and wrapped.',
      weightKg: 450,
      lengthM: 3.5,
      widthM: 2.0,
      heightM: 1.8,
      quantity: 11,
      photoUrls: [
        'https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=800',
        'https://images.unsplash.com/photo-1555041469-a586c61ea9bc?w=800',
      ],
    ),
    requiredVehicleType: VehicleType.smallTruck,
    price: 280,
    priceNegotiable: true,
    distanceKm: 290,
    estimatedMinutes: 360,
    createdAt: DateTime.now().subtract(const Duration(hours: 5)),
    expiresAt: DateTime.now().add(const Duration(days: 10)),
    views: 24,
    saves: 5,
    contactName: 'Marko Petrović',
    contactPhone: '+381 64 123 4567',
  ),
  Listing(
    id: 'listing-2',
    userId: 'user-3',
    user: _user('user-3'),
    status: ListingStatus.active,
    pickup: const GeoPoint(
      address: 'Ilica 25',
      city: 'Zagreb',
      country: 'Croatia',
      lat: 45.8131,
      lng: 15.9775,
    ),
    delivery: const GeoPoint(
      address: 'Bulevar Oslobođenja 50',
      city: 'Sarajevo',
      country: 'Bosnia',
      lat: 43.8486,
      lng: 18.3564,
    ),
    pickupDate: DateTime.now().add(const Duration(days: 3, hours: 8)),
    deliveryDate: DateTime.now().add(const Duration(days: 3, hours: 15)),
    load: const LoadDetails(
      description:
          'Construction materials — cement bags, ceramic tiles, steel rebar bundles. Heavy load, needs flatbed.',
      weightKg: 4800,
      lengthM: 6.0,
      widthM: 2.4,
      heightM: 1.5,
      quantity: 60,
      photoUrls: [
        'https://images.unsplash.com/photo-1504307651254-35680f356dfd?w=800',
      ],
    ),
    requiredVehicleType: VehicleType.flatbed,
    price: 520,
    priceNegotiable: false,
    distanceKm: 385,
    estimatedMinutes: 420,
    createdAt: DateTime.now().subtract(const Duration(hours: 12)),
    expiresAt: DateTime.now().add(const Duration(days: 7)),
    views: 42,
    saves: 12,
    contactName: 'Jana Novak',
    contactPhone: '+385 91 567 8901',
  ),
  Listing(
    id: 'listing-3',
    userId: 'user-4',
    user: _user('user-4'),
    status: ListingStatus.active,
    pickup: const GeoPoint(
      address: 'Mariahilfer Straße 10',
      city: 'Vienna',
      country: 'Austria',
      lat: 48.1975,
      lng: 16.3531,
    ),
    delivery: const GeoPoint(
      address: 'Kneza Mihaila 32',
      city: 'Belgrade',
      country: 'Serbia',
      lat: 44.8183,
      lng: 20.4579,
    ),
    pickupDate: DateTime.now().add(const Duration(days: 1, hours: 10)),
    deliveryDate: DateTime.now().add(const Duration(days: 2, hours: 8)),
    load: const LoadDetails(
      description:
          'Restaurant kitchen equipment — commercial oven, 2 fridges, dishwasher. Fragile, professional packing.',
      weightKg: 950,
      lengthM: 2.8,
      widthM: 1.6,
      heightM: 2.0,
      quantity: 4,
      photoUrls: [
        'https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?w=800',
        'https://images.unsplash.com/photo-1484154218962-a197022b5858?w=800',
      ],
      isFragile: true,
      specialRequirements: ['Professional packing', 'Liftgate required'],
    ),
    requiredVehicleType: VehicleType.largeTruck,
    price: 890,
    priceNegotiable: true,
    distanceKm: 620,
    estimatedMinutes: 480,
    createdAt: DateTime.now().subtract(const Duration(hours: 2)),
    expiresAt: DateTime.now().add(const Duration(days: 5)),
    views: 67,
    saves: 18,
    contactName: 'Stefan Müller',
    contactPhone: '+43 676 123 4567',
  ),
  Listing(
    id: 'listing-4',
    userId: 'user-5',
    user: _user('user-5'),
    status: ListingStatus.active,
    pickup: const GeoPoint(
      address: 'Titova ulica 8',
      city: 'Mostar',
      country: 'Bosnia',
      lat: 43.3438,
      lng: 17.8078,
    ),
    delivery: const GeoPoint(
      address: 'Splitska obala 1',
      city: 'Split',
      country: 'Croatia',
      lat: 43.5081,
      lng: 16.4402,
    ),
    pickupDate: DateTime.now().add(const Duration(days: 1, hours: 7)),
    deliveryDate: DateTime.now().add(const Duration(days: 1, hours: 11)),
    load: const LoadDetails(
      description:
          'Pallets of bottled olive oil and wine — 48 pallets total. Temperature sensitive.',
      weightKg: 1200,
      quantity: 48,
      photoUrls: [
        'https://images.unsplash.com/photo-1474979266404-7eaacbcd87c5?w=800',
      ],
      isFragile: true,
      specialRequirements: ['No stacking', 'Avoid heat'],
    ),
    requiredVehicleType: VehicleType.smallTruck,
    price: 220,
    priceNegotiable: true,
    distanceKm: 148,
    estimatedMinutes: 180,
    createdAt: DateTime.now().subtract(const Duration(hours: 8)),
    expiresAt: DateTime.now().add(const Duration(days: 3)),
    views: 31,
    saves: 9,
    contactName: 'Amina Hodžić',
    contactPhone: '+387 62 987 6543',
  ),
  Listing(
    id: 'listing-5',
    userId: 'user-2',
    user: _user('user-2'),
    status: ListingStatus.active,
    pickup: const GeoPoint(
      address: 'Bulevar Mihajla Pupina 115',
      city: 'Novi Sad',
      country: 'Serbia',
      lat: 45.2671,
      lng: 19.8335,
    ),
    delivery: const GeoPoint(
      address: 'Kralja Petra I 12',
      city: 'Sarajevo',
      country: 'Bosnia',
      lat: 43.8607,
      lng: 18.4214,
    ),
    pickupDate: DateTime.now().add(const Duration(days: 4, hours: 9)),
    deliveryDate: DateTime.now().add(const Duration(days: 4, hours: 17)),
    load: const LoadDetails(
      description:
          'E-commerce warehouse stock — 200+ boxes of mixed household goods. All sealed and labelled.',
      weightKg: 800,
      quantity: 210,
      photoUrls: [
        'https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=800',
      ],
    ),
    requiredVehicleType: VehicleType.largeTruck,
    price: 650,
    priceNegotiable: false,
    distanceKm: 445,
    estimatedMinutes: 360,
    createdAt: DateTime.now().subtract(const Duration(days: 1)),
    expiresAt: DateTime.now().add(const Duration(days: 8)),
    views: 89,
    saves: 22,
    contactName: 'Marko Petrović',
    contactPhone: '+381 64 123 4567',
  ),
  Listing(
    id: 'listing-6',
    userId: 'user-3',
    user: _user('user-3'),
    status: ListingStatus.active,
    pickup: const GeoPoint(
      address: 'Varaždinska 4',
      city: 'Zagreb',
      country: 'Croatia',
      lat: 45.8300,
      lng: 16.0100,
    ),
    delivery: const GeoPoint(
      address: 'Masarykova 7',
      city: 'Ljubljana',
      country: 'Slovenia',
      lat: 46.0569,
      lng: 14.5058,
    ),
    pickupDate: DateTime.now().add(const Duration(days: 2, hours: 11)),
    deliveryDate: DateTime.now().add(const Duration(days: 2, hours: 14)),
    load: const LoadDetails(
      description:
          'Photography studio gear — backdrop systems, lighting rigs, camera cases. Extremely fragile.',
      weightKg: 180,
      quantity: 15,
      isFragile: true,
      specialRequirements: ['Extremely fragile', 'No tilting'],
      photoUrls: [
        'https://images.unsplash.com/photo-1516035069371-29a1b244cc32?w=800',
      ],
    ),
    requiredVehicleType: VehicleType.van,
    price: 145,
    priceNegotiable: true,
    distanceKm: 140,
    estimatedMinutes: 150,
    createdAt: DateTime.now().subtract(const Duration(hours: 3)),
    expiresAt: DateTime.now().add(const Duration(days: 6)),
    views: 15,
    saves: 4,
    contactName: 'Jana Novak',
    contactPhone: '+385 91 567 8901',
  ),
];

/// Returns listings whose delivery city is close to the user's home location.
List<Listing> listingsOnRoute(double homeLat, double homeLng) {
  return mockListings.where((l) {
    final dLat = (l.delivery.lat - homeLat).abs();
    final dLng = (l.delivery.lng - homeLng).abs();
    return dLat < 2.0 && dLng < 2.0;
  }).toList();
}